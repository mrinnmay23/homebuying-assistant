<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head><meta charset="UTF-8"><title>Loan Calculator</title></head>-->
<!--<body>-->
<!--<h1>Loan Calculator</h1>-->
<!--<a th:href="@{/}">&larr; Home</a>-->
<!--<form id="form">-->
<!--    <label>Principal: <input id="P" type="number" step="0.01"/></label><br/>-->
<!--    <label>Rate (%):   <input id="R" type="number" step="0.01"/></label><br/>-->
<!--    <label>Term (yr):  <input id="T" type="number"/></label><br/>-->
<!--    <button>Calculate</button>-->
<!--</form>-->
<!--<pre id="out"></pre>-->

<!--<script>-->
<!--    document.getElementById('form').addEventListener('submit', async e=>{-->
<!--        e.preventDefault();-->
<!--        const P = document.getElementById('P').value,-->
<!--            R = document.getElementById('R').value,-->
<!--            T = document.getElementById('T').value;-->
<!--        const res = await fetch(`/api/calculate?principal=${P}&rate=${R}&term=${T}`);-->
<!--        const ans = await res.json();-->
<!--        document.getElementById('out').textContent = JSON.stringify(ans, null, 2);-->
<!--    });-->
<!--</script>-->
<!--</body>-->
<!--</html>-->


<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Loan Calculator</title>
    <link
            href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.2/dist/cosmo/bootstrap.min.css"
            rel="stylesheet"/>
    <style>
        body {
            background: url('/images/background.jpg') no-repeat center center fixed;
            background-size: cover;
        }
        .calc-card {
            background: rgba(255,255,255,0.9);
            padding: 2rem;
            border-radius: .5rem;
            max-width: 600px;
            margin: 2rem auto;
        }
    </style>
</head>
<body class="bg-light">

<!--<nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">-->
<nav class="navbar navbar-expand-lg bg-transparent mb-4">
    <div class="container">
        <a class="navbar-brand" th:href="@{/}">Homebuying Assistant</a>
        <div class="navbar-nav">
            <a class="nav-link" th:href="@{/chat}">Chat</a>
            <a class="nav-link" th:href="@{/quotes}">Quotes</a>
            <a class="nav-link active" th:href="@{/calculator}">Calculator</a>
        </div>
    </div>
</nav>

<div class="container">
    <a th:href="@{/}" class="btn btn-outline-secondary mb-3">‚Üê Home</a>

    <div class="calc-card">
        <h2 class="mb-4">Loan Calculator</h2>
        <form id="calc-form" class="row g-3 mb-3">
            <div class="col-md-4">
                <input id="P" type="number" step="0.01" min="0"
                       class="form-control" placeholder="Principal" required>
            </div>
            <div class="col-md-4">
                <input id="R" type="number" step="0.01" min="0"
                       class="form-control" placeholder="Rate (%)" required>
            </div>
            <div class="col-md-4">
                <input id="T" type="number" min="1"
                       class="form-control" placeholder="Term (yr)" required>
            </div>
            <div class="col-12 text-center">
                <button type="submit" class="btn btn-primary">Calculate</button>
            </div>
        </form>

        <div id="result" class="alert alert-info" style="display:none;"></div>
    </div>
</div>

<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js">
</script>

<!-- plain JS, no Thymeleaf inlining -->
<script>
    const form   = document.getElementById('calc-form'),
        result = document.getElementById('result');

    form.addEventListener('submit', async e => {
        e.preventDefault();
        const P = document.getElementById('P').value,
            R = document.getElementById('R').value,
            T = document.getElementById('T').value;

        const url = `/api/calculate?principal=${encodeURIComponent(P)}`
            + `&rate=${encodeURIComponent(R)}`
            + `&term=${encodeURIComponent(T)}`;

        const resp = await fetch(url);
        const body = await resp.json();

        result.style.display = 'block';
        result.textContent   = `Your monthly payment is $${body.monthlyPayment.toFixed(2)}`;
    });
</script>
</body>
</html>
